package com.pony.docker;

import java.io.IOException;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpException;
import org.apache.commons.httpclient.methods.DeleteMethod;
import org.apache.commons.httpclient.methods.PostMethod;

public class RemoteApi {
	private static final String URL = "http://schoolproject.cloudapp.net:2375";
	
	/*
	 * Start a container
	 * Example request:
	 * POST /containers/(id)/start HTTP/1.1
	 * 
	 * Example response:
	 * HTTP/1.1 204 No Content
	 * 
	 * Status Codes:

	    204 ¡V no error
	    304 ¡V container already started
	    404 ¡V no such container
	    500 ¡V server error
	*/	
	public static int startContainer(String conterID) throws Exception{
		HttpClient client = new HttpClient();
		PostMethod post = new PostMethod(URL + "/containers/" + conterID + "/start");
		int statusCode = client.executeMethod(post);
		return statusCode;
	}
	
	/*
	 * Stop a container
	 * POST /containers/(id)/stop
	 * Example request:

		POST /containers/e90e34656806/stop?t=5 HTTP/1.1
		
	 * Example response:

		HTTP/1.1 204 No Content
	 * Query Parameters:

    	t ¡V number of seconds to wait before killing the container

	Status Codes:
	
	    204 ¡V no error
	    304 ¡V container already stopped
	    404 ¡V no such container
	    500 ¡V server error
*/
	public static int stopContainer(String conterID) throws Exception{
		HttpClient client = new HttpClient();
		PostMethod post = new PostMethod(URL + "/containers/" + conterID + "/stop?t=5");
		int statusCode = client.executeMethod(post);
		return statusCode;
	}
	
	
	/*Remove a container
	 * DELETE /containers/(id)
	 * Example request:

		DELETE /containers/16253994b7c4?v=1 HTTP/1.1
	 *Example response:

		HTTP/1.1 204 No Content
	 *
	 *Query Parameters:

	    v ¡V 1/True/true or 0/False/false, Remove the volumes associated to the container. Default false.
	    force - 1/True/true or 0/False/false, Kill then remove the container. Default false.
	
	  Status Codes:
	    204 ¡V no error
	    400 ¡V bad parameter
	    404 ¡V no such container
	    500 ¡V server error
	 *
	 *
*/
	public static int removeContainer(String conterID)throws Excpetion{
		HttpClient client = new HttpClient();
		
		DeleteMethod delete = new DeleteMethod(URL + "/containers/" + conterID + "?v=1");
		int statusCode = client.executeMethod(delete);
		return statusCode;
	}
}
